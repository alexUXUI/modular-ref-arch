/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const t=globalThis,e$1=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s=Symbol(),o$1=new WeakMap;class n$2{constructor(e,t,o){if(this._$cssResult$=!0,o!==s)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(e$1&&void 0===e){const o=void 0!==t&&1===t.length;o&&(e=o$1.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),o&&o$1.set(t,e))}return e}toString(){return this.cssText}}const r$1=e=>new n$2("string"==typeof e?e:e+"",void 0,s),i$1=(e,...t)=>{const o=1===e.length?e[0]:t.reduce(((t,o,n)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+e[n+1]),e[0]);return new n$2(o,e,s)},S$1=(e,o)=>{if(e$1)e.adoptedStyleSheets=o.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet));else for(const n of o){const o=document.createElement("style"),r=t.litNonce;void 0!==r&&o.setAttribute("nonce",r),o.textContent=n.cssText,e.appendChild(o)}},c$2=e$1?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const o of e.cssRules)t+=o.cssText;return r$1(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,{is:i,defineProperty:e,getOwnPropertyDescriptor:r,getOwnPropertyNames:h$2,getOwnPropertySymbols:o,getPrototypeOf:n$1}=Object,a=globalThis,c$1=a.trustedTypes,l=c$1?c$1.emptyScript:"",p=a.reactiveElementPolyfillSupport,d=(e,t)=>e,u={toAttribute(e,t){switch(t){case Boolean:e=e?l:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let o=e;switch(t){case Boolean:o=null!==e;break;case Number:o=null===e?null:Number(e);break;case Object:case Array:try{o=JSON.parse(e)}catch(e){o=null}}return o}},f$2=(e,t)=>!i(e,t),y={attribute:!0,type:String,converter:u,reflect:!1,hasChanged:f$2};Symbol.metadata??=Symbol("metadata"),a.litPropertyMetadata??=new WeakMap;class b extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,o=y){if(o.state&&(o.attribute=!1),this._$Ei(),this.elementProperties.set(t,o),!o.noAccessor){const n=Symbol(),r=this.getPropertyDescriptor(t,n,o);void 0!==r&&e(this.prototype,t,r)}}static getPropertyDescriptor(e,t,o){const{get:n,set:s}=r(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get(){return n?.call(this)},set(t){const r=n?.call(this);s.call(this,t),this.requestUpdate(e,r,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??y}static _$Ei(){if(this.hasOwnProperty(d("elementProperties")))return;const e=n$1(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(d("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d("properties"))){const e=this.properties,t=[...h$2(e),...o(e)];for(const o of t)this.createProperty(o,e[o])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,o]of t)this.elementProperties.set(e,o)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const o=this._$Eu(e,t);void 0!==o&&this._$Eh.set(o,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const o=new Set(e.flat(1/0).reverse());for(const e of o)t.unshift(c$2(e))}else void 0!==e&&t.push(c$2(e));return t}static _$Eu(e,t){const o=t.attribute;return!1===o?void 0:"string"==typeof o?o:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const o of t.keys())this.hasOwnProperty(o)&&(e.set(o,this[o]),delete this[o]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return S$1(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,o){this._$AK(e,o)}_$EC(e,t){const o=this.constructor.elementProperties.get(e),n=this.constructor._$Eu(e,o);if(void 0!==n&&!0===o.reflect){const r=(void 0!==o.converter?.toAttribute?o.converter:u).toAttribute(t,o.type);this._$Em=e,null==r?this.removeAttribute(n):this.setAttribute(n,r),this._$Em=null}}_$AK(e,t){const o=this.constructor,n=o._$Eh.get(e);if(void 0!==n&&this._$Em!==n){const e=o.getPropertyOptions(n),r="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:u;this._$Em=n,this[n]=r.fromAttribute(t,e.type),this._$Em=null}}requestUpdate(e,t,o){if(void 0!==e){if(o??=this.constructor.getPropertyOptions(e),!(o.hasChanged??f$2)(this[e],t))return;this.P(e,t,o)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(e,t,o){this._$AL.has(e)||this._$AL.set(e,t),!0===o.reflect&&this._$Em!==e&&(this._$Ej??=new Set).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,o]of e)!0!==o.wrapped||this._$AL.has(t)||void 0===this[t]||this.P(t,this[t],o)}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach((e=>e.hostUpdate?.())),this.update(t)):this._$EU()}catch(t){throw e=!1,this._$EU(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach((e=>e.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&=this._$Ej.forEach((e=>this._$EC(e,this[e]))),this._$EU()}updated(e){}firstUpdated(e){}}b.elementStyles=[],b.shadowRootOptions={mode:"open"},b[d("elementProperties")]=new Map,b[d("finalized")]=new Map,p?.({ReactiveElement:b}),(a.reactiveElementVersions??=[]).push("2.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const n=globalThis,c=n.trustedTypes,h$1=c?c.createPolicy("lit-html",{createHTML:e=>e}):void 0,f$1="$lit$",v=`lit$${Math.random().toFixed(9).slice(2)}$`,m="?"+v,_=`<${m}>`,w=document,lt=()=>w.createComment(""),st=e=>null===e||"object"!=typeof e&&"function"!=typeof e,g=Array.isArray,$=e=>g(e)||"function"==typeof e?.[Symbol.iterator],x="[ \t\n\f\r]",T=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,E=/-->/g,k=/>/g,O=RegExp(`>|${x}(?:([^\\s"'>=/]+)(${x}*=${x}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),S=/'/g,j=/"/g,M=/^(?:script|style|textarea|title)$/i,P=e=>(t,...o)=>({_$litType$:e,strings:t,values:o}),ke=P(1),R=Symbol.for("lit-noChange"),D=Symbol.for("lit-nothing"),V=new WeakMap,I=w.createTreeWalker(w,129);function N(e,t){if(!g(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==h$1?h$1.createHTML(t):t}const U=(e,t)=>{const o=e.length-1,n=[];let r,s=2===t?"<svg>":3===t?"<math>":"",i=T;for(let t=0;t<o;t++){const o=e[t];let a,l,c=-1,h=0;for(;h<o.length&&(i.lastIndex=h,l=i.exec(o),null!==l);)h=i.lastIndex,i===T?"!--"===l[1]?i=E:void 0!==l[1]?i=k:void 0!==l[2]?(M.test(l[2])&&(r=RegExp("</"+l[2],"g")),i=O):void 0!==l[3]&&(i=O):i===O?">"===l[0]?(i=r??T,c=-1):void 0===l[1]?c=-2:(c=i.lastIndex-l[2].length,a=l[1],i=void 0===l[3]?O:'"'===l[3]?j:S):i===j||i===S?i=O:i===E||i===k?i=T:(i=O,r=void 0);const u=i===O&&e[t+1].startsWith("/>")?" ":"";s+=i===T?o+_:c>=0?(n.push(a),o.slice(0,c)+f$1+o.slice(c)+v+u):o+v+(-2===c?t:u)}return[N(e,s+(e[o]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),n]};class B{constructor({strings:e,_$litType$:t},o){let n;this.parts=[];let r=0,s=0;const i=e.length-1,a=this.parts,[l,h]=U(e,t);if(this.el=B.createElement(l,o),I.currentNode=this.el.content,2===t||3===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(n=I.nextNode())&&a.length<i;){if(1===n.nodeType){if(n.hasAttributes())for(const e of n.getAttributeNames())if(e.endsWith(f$1)){const t=h[s++],o=n.getAttribute(e).split(v),i=/([.?@])?(.*)/.exec(t);a.push({type:1,index:r,name:i[2],strings:o,ctor:"."===i[1]?Y:"?"===i[1]?Z:"@"===i[1]?q:G}),n.removeAttribute(e)}else e.startsWith(v)&&(a.push({type:6,index:r}),n.removeAttribute(e));if(M.test(n.tagName)){const e=n.textContent.split(v),t=e.length-1;if(t>0){n.textContent=c?c.emptyScript:"";for(let o=0;o<t;o++)n.append(e[o],lt()),I.nextNode(),a.push({type:2,index:++r});n.append(e[t],lt())}}}else if(8===n.nodeType)if(n.data===m)a.push({type:2,index:r});else{let e=-1;for(;-1!==(e=n.data.indexOf(v,e+1));)a.push({type:7,index:r}),e+=v.length-1}r++}}static createElement(e,t){const o=w.createElement("template");return o.innerHTML=e,o}}function z(e,t,o=e,n){if(t===R)return t;let r=void 0!==n?o.o?.[n]:o.l;const s=st(t)?void 0:t._$litDirective$;return r?.constructor!==s&&(r?._$AO?.(!1),void 0===s?r=void 0:(r=new s(e),r._$AT(e,o,n)),void 0!==n?(o.o??=[])[n]=r:o.l=r),void 0!==r&&(t=z(e,r._$AS(e,t.values),r,n)),t}class F{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:o}=this._$AD,n=(e?.creationScope??w).importNode(t,!0);I.currentNode=n;let r=I.nextNode(),s=0,i=0,a=o[0];for(;void 0!==a;){if(s===a.index){let t;2===a.type?t=new et(r,r.nextSibling,this,e):1===a.type?t=new a.ctor(r,a.name,a.strings,this,e):6===a.type&&(t=new K(r,this,e)),this._$AV.push(t),a=o[++i]}s!==a?.index&&(r=I.nextNode(),s++)}return I.currentNode=w,n}p(e){let t=0;for(const o of this._$AV)void 0!==o&&(void 0!==o.strings?(o._$AI(e,o,t),t+=o.strings.length-2):o._$AI(e[t])),t++}}class et{get _$AU(){return this._$AM?._$AU??this.v}constructor(e,t,o,n){this.type=2,this._$AH=D,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=o,this.options=n,this.v=n?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=z(this,e,t),st(e)?e===D||null==e||""===e?(this._$AH!==D&&this._$AR(),this._$AH=D):e!==this._$AH&&e!==R&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):$(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==D&&st(this._$AH)?this._$AA.nextSibling.data=e:this.T(w.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:o}=e,n="number"==typeof o?this._$AC(e):(void 0===o.el&&(o.el=B.createElement(N(o.h,o.h[0]),this.options)),o);if(this._$AH?._$AD===n)this._$AH.p(t);else{const e=new F(n,this),o=e.u(this.options);e.p(t),this.T(o),this._$AH=e}}_$AC(e){let t=V.get(e.strings);return void 0===t&&V.set(e.strings,t=new B(e)),t}k(e){g(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let o,n=0;for(const r of e)n===t.length?t.push(o=new et(this.O(lt()),this.O(lt()),this,this.options)):o=t[n],o._$AI(r),n++;n<t.length&&(this._$AR(o&&o._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this.v=e,this._$AP?.(e))}}class G{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,o,n,r){this.type=1,this._$AH=D,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=r,o.length>2||""!==o[0]||""!==o[1]?(this._$AH=Array(o.length-1).fill(new String),this.strings=o):this._$AH=D}_$AI(e,t=this,o,n){const r=this.strings;let s=!1;if(void 0===r)e=z(this,e,t,0),s=!st(e)||e!==this._$AH&&e!==R,s&&(this._$AH=e);else{const n=e;let i,a;for(e=r[0],i=0;i<r.length-1;i++)a=z(this,n[o+i],t,i),a===R&&(a=this._$AH[i]),s||=!st(a)||a!==this._$AH[i],a===D?e=D:e!==D&&(e+=(a??"")+r[i+1]),this._$AH[i]=a}s&&!n&&this.j(e)}j(e){e===D?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Y extends G{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===D?void 0:e}}class Z extends G{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==D)}}class q extends G{constructor(e,t,o,n,r){super(e,t,o,n,r),this.type=5}_$AI(e,t=this){if((e=z(this,e,t,0)??D)===R)return;const o=this._$AH,n=e===D&&o!==D||e.capture!==o.capture||e.once!==o.once||e.passive!==o.passive,r=e!==D&&(o===D||n);n&&this.element.removeEventListener(this.name,this,o),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class K{constructor(e,t,o){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=o}get _$AU(){return this._$AM._$AU}_$AI(e){z(this,e)}}const Re=n.litHtmlPolyfillSupport;Re?.(B,et),(n.litHtmlVersions??=[]).push("3.2.0");const Q=(e,t,o)=>{const n=o?.renderBefore??t;let r=n._$litPart$;if(void 0===r){const e=o?.renderBefore??null;n._$litPart$=r=new et(t.insertBefore(lt(),e),e,void 0,o??{})}return r._$AI(e),r
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */};class h extends b{constructor(){super(...arguments),this.renderOptions={host:this},this.o=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this.o=Q(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this.o?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this.o?.setConnected(!1)}render(){return R}}h._$litElement$=!0,h.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:h});const f=globalThis.litElementPolyfillSupport;f?.({LitElement:h}),(globalThis.litElementVersions??=[]).push("4.1.0");class ViewerElement extends h{render(){return ke`
      <div class="content">
        <h1>Viewer</h1>
        <plugin-element></plugin-element>
      </div>
    `}}Object.defineProperty(ViewerElement,"styles",{enumerable:!0,configurable:!0,writable:!0,value:i$1`
    .content h1 {
      font-size: 3.6rem;
    }
  `});var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},runtime={},runtime_cjs={},index_cjs$1={},share_cjs={};function getBuilderId(){return"undefined"!=typeof FEDERATION_BUILD_IDENTIFIER?FEDERATION_BUILD_IDENTIFIER:""}function isDebugMode$1(){return Boolean("")}function isBrowserEnv$1(){return"undefined"!=typeof window}const LOG_CATEGORY$1="[ Federation Runtime ]";function assert$1(e,t){e||error$1(t)}function error$1(e){if(e instanceof Error)throw e.message=`${LOG_CATEGORY$1}: ${e.message}`,e;throw new Error(`${LOG_CATEGORY$1}: ${e}`)}function warn$1(e){e instanceof Error?(e.message=`${LOG_CATEGORY$1}: ${e.message}`,console.warn(e)):console.warn(`${LOG_CATEGORY$1}: ${e}`)}function addUniqueItem(e,t){return-1===e.findIndex((e=>e===t))&&e.push(t),e}function getFMId(e){return"version"in e&&e.version?`${e.name}:${e.version}`:"entry"in e&&e.entry?`${e.name}:${e.entry}`:`${e.name}`}function isRemoteInfoWithEntry(e){return void 0!==e.entry}function isPureRemoteEntry(e){return!e.entry.includes(".json")&&e.entry.includes(".js")}function safeToString$1(e){try{return JSON.stringify(e,null,2)}catch(e){return""}}function isObject(e){return e&&"object"==typeof e}const objectToString=Object.prototype.toString;function isPlainObject(e){return"[object Object]"===objectToString.call(e)}function arrayOptions(e){return Array.isArray(e)?e:[e]}function getRemoteEntryInfoFromSnapshot(e){const t={url:"",type:"global",globalName:""};return isBrowserEnv$1()?"remoteEntry"in e?{url:e.remoteEntry,type:e.remoteEntryType,globalName:e.globalName}:t:"ssrRemoteEntry"in e?{url:e.ssrRemoteEntry||t.url,type:e.ssrRemoteEntryType||t.type,globalName:e.globalName}:t}function _extends$1$1(){return _extends$1$1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends$1$1.apply(this,arguments)}function _object_without_properties_loose(e,t){if(null==e)return{};var o,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)o=s[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}const nativeGlobal=(()=>{try{return new Function("return this")()}catch(e){return globalThis}})(),Global=nativeGlobal;function definePropertyGlobalVal(e,t,o){Object.defineProperty(e,t,{value:o,configurable:!1,writable:!0})}function includeOwnProperty(e,t){return Object.hasOwnProperty.call(e,t)}includeOwnProperty(globalThis,"__GLOBAL_LOADING_REMOTE_ENTRY__")||definePropertyGlobalVal(globalThis,"__GLOBAL_LOADING_REMOTE_ENTRY__",{});const globalLoading=globalThis.__GLOBAL_LOADING_REMOTE_ENTRY__;function setGlobalDefaultVal(e){var t,o,n,r,s,i;includeOwnProperty(e,"__VMOK__")&&!includeOwnProperty(e,"__FEDERATION__")&&definePropertyGlobalVal(e,"__FEDERATION__",e.__VMOK__),includeOwnProperty(e,"__FEDERATION__")||(definePropertyGlobalVal(e,"__FEDERATION__",{__GLOBAL_PLUGIN__:[],__INSTANCES__:[],moduleInfo:{},__SHARE__:{},__MANIFEST_LOADING__:{},__PRELOADED_MAP__:new Map}),definePropertyGlobalVal(e,"__VMOK__",e.__FEDERATION__)),null!=(t=e.__FEDERATION__).__GLOBAL_PLUGIN__||(t.__GLOBAL_PLUGIN__=[]),null!=(o=e.__FEDERATION__).__INSTANCES__||(o.__INSTANCES__=[]),null!=(n=e.__FEDERATION__).moduleInfo||(n.moduleInfo={}),null!=(r=e.__FEDERATION__).__SHARE__||(r.__SHARE__={}),null!=(s=e.__FEDERATION__).__MANIFEST_LOADING__||(s.__MANIFEST_LOADING__={}),null!=(i=e.__FEDERATION__).__PRELOADED_MAP__||(i.__PRELOADED_MAP__=new Map)}function resetFederationGlobalInfo(){globalThis.__FEDERATION__.__GLOBAL_PLUGIN__=[],globalThis.__FEDERATION__.__INSTANCES__=[],globalThis.__FEDERATION__.moduleInfo={},globalThis.__FEDERATION__.__SHARE__={},globalThis.__FEDERATION__.__MANIFEST_LOADING__={}}function getGlobalFederationInstance(e,t){const o=getBuilderId();return globalThis.__FEDERATION__.__INSTANCES__.find((n=>!(!o||n.options.id!==getBuilderId())||(n.options.name===e&&!n.options.version&&!t||!(n.options.name!==e||!t||n.options.version!==t))))}function setGlobalFederationInstance(e){globalThis.__FEDERATION__.__INSTANCES__.push(e)}function getGlobalFederationConstructor(){return globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR__}function setGlobalFederationConstructor(e,t=isDebugMode$1()){t&&(globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR__=e,globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR_VERSION__="0.5.0")}function getInfoWithoutType(e,t){if("string"==typeof t){if(e[t])return{value:e[t],key:t};{const o=Object.keys(e);for(const n of o){const[o,r]=n.split(":"),s=`${o}:${t}`,i=e[s];if(i)return{value:i,key:s}}return{value:void 0,key:t}}}throw new Error("key must be string")}setGlobalDefaultVal(globalThis),setGlobalDefaultVal(nativeGlobal);const getGlobalSnapshot=()=>nativeGlobal.__FEDERATION__.moduleInfo,getTargetSnapshotInfoByModuleInfo=(e,t)=>{const o=getInfoWithoutType(t,getFMId(e)).value;if(o&&!o.version&&"version"in e&&e.version&&(o.version=e.version),o)return o;if("version"in e&&e.version){const{version:t}=e,o=getFMId(_object_without_properties_loose(e,["version"])),n=getInfoWithoutType(nativeGlobal.__FEDERATION__.moduleInfo,o).value;if((null==n?void 0:n.version)===t)return n}},getGlobalSnapshotInfoByModuleInfo=e=>getTargetSnapshotInfoByModuleInfo(e,nativeGlobal.__FEDERATION__.moduleInfo),setGlobalSnapshotInfoByModuleInfo=(e,t)=>{const o=getFMId(e);return nativeGlobal.__FEDERATION__.moduleInfo[o]=t,nativeGlobal.__FEDERATION__.moduleInfo},addGlobalSnapshot=e=>(nativeGlobal.__FEDERATION__.moduleInfo=_extends$1$1({},nativeGlobal.__FEDERATION__.moduleInfo,e),()=>{const t=Object.keys(e);for(const e of t)delete nativeGlobal.__FEDERATION__.moduleInfo[e]}),getRemoteEntryExports=(e,t)=>{const o=t||`__FEDERATION_${e}:custom__`;return{remoteEntryKey:o,entryExports:globalThis[o]}},registerGlobalPlugins=e=>{const{__GLOBAL_PLUGIN__:t}=nativeGlobal.__FEDERATION__;e.forEach((e=>{-1===t.findIndex((t=>t.name===e.name))?t.push(e):warn$1(`The plugin ${e.name} has been registered.`)}))},getGlobalHostPlugins=()=>nativeGlobal.__FEDERATION__.__GLOBAL_PLUGIN__,getPreloaded=e=>globalThis.__FEDERATION__.__PRELOADED_MAP__.get(e),setPreloaded=e=>globalThis.__FEDERATION__.__PRELOADED_MAP__.set(e,!0),DEFAULT_SCOPE="default",DEFAULT_REMOTE_TYPE="global",buildIdentifier="[0-9A-Za-z-]+",build=`(?:\\+(${buildIdentifier}(?:\\.${buildIdentifier})*))`,numericIdentifier="0|[1-9]\\d*",numericIdentifierLoose="[0-9]+",nonNumericIdentifier="\\d*[a-zA-Z-][a-zA-Z0-9-]*",preReleaseIdentifierLoose=`(?:${numericIdentifierLoose}|${nonNumericIdentifier})`,preReleaseLoose=`(?:-?(${preReleaseIdentifierLoose}(?:\\.${preReleaseIdentifierLoose})*))`,preReleaseIdentifier=`(?:${numericIdentifier}|${nonNumericIdentifier})`,preRelease=`(?:-(${preReleaseIdentifier}(?:\\.${preReleaseIdentifier})*))`,xRangeIdentifier=`${numericIdentifier}|x|X|\\*`,xRangePlain=`[v=\\s]*(${xRangeIdentifier})(?:\\.(${xRangeIdentifier})(?:\\.(${xRangeIdentifier})(?:${preRelease})?${build}?)?)?`,hyphenRange=`^\\s*(${xRangePlain})\\s+-\\s+(${xRangePlain})\\s*$`,mainVersionLoose=`(${numericIdentifierLoose})\\.(${numericIdentifierLoose})\\.(${numericIdentifierLoose})`,loosePlain=`[v=\\s]*${mainVersionLoose}${preReleaseLoose}?${build}?`,gtlt="((?:<|>)?=?)",comparatorTrim=`(\\s*)${gtlt}\\s*(${loosePlain}|${xRangePlain})`,loneTilde="(?:~>?)",tildeTrim=`(\\s*)${loneTilde}\\s+`,loneCaret="(?:\\^)",caretTrim=`(\\s*)${loneCaret}\\s+`,star="(<|>)?=?\\s*\\*",caret=`^${loneCaret}${xRangePlain}$`,mainVersion=`(${numericIdentifier})\\.(${numericIdentifier})\\.(${numericIdentifier})`,fullPlain=`v?${mainVersion}${preRelease}?${build}?`,tilde=`^${loneTilde}${xRangePlain}$`,xRange=`^${gtlt}\\s*${xRangePlain}$`,comparator=`^${gtlt}\\s*(${fullPlain})$|^$`,gte0="^\\s*>=\\s*0.0.0\\s*$";function parseRegex(e){return new RegExp(e)}function isXVersion(e){return!e||"x"===e.toLowerCase()||"*"===e}function pipe(...e){return t=>e.reduce(((e,t)=>t(e)),t)}function extractComparator(e){return e.match(parseRegex(comparator))}function combineVersion(e,t,o,n){const r=`${e}.${t}.${o}`;return n?`${r}-${n}`:r}function parseHyphen(e){return e.replace(parseRegex(hyphenRange),((e,t,o,n,r,s,i,a,l,c,h,u)=>`${t=isXVersion(o)?"":isXVersion(n)?`>=${o}.0.0`:isXVersion(r)?`>=${o}.${n}.0`:`>=${t}`} ${a=isXVersion(l)?"":isXVersion(c)?`<${Number(l)+1}.0.0-0`:isXVersion(h)?`<${l}.${Number(c)+1}.0-0`:u?`<=${l}.${c}.${h}-${u}`:`<=${a}`}`.trim()))}function parseComparatorTrim(e){return e.replace(parseRegex(comparatorTrim),"$1$2$3")}function parseTildeTrim(e){return e.replace(parseRegex(tildeTrim),"$1~")}function parseCaretTrim(e){return e.replace(parseRegex(caretTrim),"$1^")}function parseCarets(e){return e.trim().split(/\s+/).map((e=>e.replace(parseRegex(caret),((e,t,o,n,r)=>isXVersion(t)?"":isXVersion(o)?`>=${t}.0.0 <${Number(t)+1}.0.0-0`:isXVersion(n)?"0"===t?`>=${t}.${o}.0 <${t}.${Number(o)+1}.0-0`:`>=${t}.${o}.0 <${Number(t)+1}.0.0-0`:r?"0"===t?"0"===o?`>=${t}.${o}.${n}-${r} <${t}.${o}.${Number(n)+1}-0`:`>=${t}.${o}.${n}-${r} <${t}.${Number(o)+1}.0-0`:`>=${t}.${o}.${n}-${r} <${Number(t)+1}.0.0-0`:"0"===t?"0"===o?`>=${t}.${o}.${n} <${t}.${o}.${Number(n)+1}-0`:`>=${t}.${o}.${n} <${t}.${Number(o)+1}.0-0`:`>=${t}.${o}.${n} <${Number(t)+1}.0.0-0`)))).join(" ")}function parseTildes(e){return e.trim().split(/\s+/).map((e=>e.replace(parseRegex(tilde),((e,t,o,n,r)=>isXVersion(t)?"":isXVersion(o)?`>=${t}.0.0 <${Number(t)+1}.0.0-0`:isXVersion(n)?`>=${t}.${o}.0 <${t}.${Number(o)+1}.0-0`:r?`>=${t}.${o}.${n}-${r} <${t}.${Number(o)+1}.0-0`:`>=${t}.${o}.${n} <${t}.${Number(o)+1}.0-0`)))).join(" ")}function parseXRanges(e){return e.split(/\s+/).map((e=>e.trim().replace(parseRegex(xRange),((e,t,o,n,r,s)=>{const i=isXVersion(o),a=i||isXVersion(n),l=a||isXVersion(r);return"="===t&&l&&(t=""),s="",i?">"===t||"<"===t?"<0.0.0-0":"*":t&&l?(a&&(n=0),r=0,">"===t?(t=">=",a?(o=Number(o)+1,n=0,r=0):(n=Number(n)+1,r=0)):"<="===t&&(t="<",a?o=Number(o)+1:n=Number(n)+1),"<"===t&&(s="-0"),`${t+o}.${n}.${r}${s}`):a?`>=${o}.0.0${s} <${Number(o)+1}.0.0-0`:l?`>=${o}.${n}.0${s} <${o}.${Number(n)+1}.0-0`:e})))).join(" ")}function parseStar(e){return e.trim().replace(parseRegex(star),"")}function parseGTE0(e){return e.trim().replace(parseRegex(gte0),"")}function compareAtom(e,t){return(e=Number(e)||e)>(t=Number(t)||t)?1:e===t?0:-1}function comparePreRelease(e,t){const{preRelease:o}=e,{preRelease:n}=t;if(void 0===o&&Boolean(n))return 1;if(Boolean(o)&&void 0===n)return-1;if(void 0===o&&void 0===n)return 0;for(let e=0,t=o.length;e<=t;e++){const t=o[e],r=n[e];if(t!==r)return void 0===t&&void 0===r?0:t?r?compareAtom(t,r):-1:1}return 0}function compareVersion(e,t){return compareAtom(e.major,t.major)||compareAtom(e.minor,t.minor)||compareAtom(e.patch,t.patch)||comparePreRelease(e,t)}function eq(e,t){return e.version===t.version}function compare(e,t){switch(e.operator){case"":case"=":return eq(e,t);case">":return compareVersion(e,t)<0;case">=":return eq(e,t)||compareVersion(e,t)<0;case"<":return compareVersion(e,t)>0;case"<=":return eq(e,t)||compareVersion(e,t)>0;case void 0:return!0;default:return!1}}function parseComparatorString(e){return pipe(parseCarets,parseTildes,parseXRanges,parseStar)(e)}function parseRange(e){return pipe(parseHyphen,parseComparatorTrim,parseTildeTrim,parseCaretTrim)(e.trim()).split(/\s+/).join(" ")}function satisfy(e,t){if(!e)return!1;const o=parseRange(t).split(" ").map((e=>parseComparatorString(e))).join(" ").split(/\s+/).map((e=>parseGTE0(e))),n=extractComparator(e);if(!n)return!1;const[,r,,s,i,a,l]=n,c={operator:r,version:combineVersion(s,i,a,l),major:s,minor:i,patch:a,preRelease:null==l?void 0:l.split(".")};for(const e of o){const t=extractComparator(e);if(!t)return!1;const[,o,,n,r,s,i]=t;if(!compare({operator:o,version:combineVersion(n,r,s,i),major:n,minor:r,patch:s,preRelease:null==i?void 0:i.split(".")},c))return!1}return!0}function _extends$2(){return _extends$2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends$2.apply(this,arguments)}function formatShare(e,t,o){let n;var r,s;return n="get"in e?e.get:"lib"in e?()=>Promise.resolve(e.lib):()=>Promise.resolve((()=>{throw new Error(`Can not get shared '${o}'!`)})),_extends$2({deps:[],useIn:[],from:t,loading:null},e,{shareConfig:_extends$2({requiredVersion:`^${e.version}`,singleton:!1,eager:!1,strictVersion:!1},e.shareConfig),get:n,loaded:!(!(null==e?void 0:e.loaded)&&!("lib"in e))||void 0,version:null!=(r=e.version)?r:"0",scope:Array.isArray(e.scope)?e.scope:[null!=(s=e.scope)?s:"default"],strategy:e.strategy||"version-first"})}function formatShareConfigs(e,t){const o=t.shared||{},n=t.name,r=Object.keys(o).reduce(((e,t)=>{const r=arrayOptions(o[t]);return e[t]=e[t]||[],r.forEach((o=>{e[t].push(formatShare(o,n,t))})),e}),{}),s=_extends$2({},e.shared);return Object.keys(r).forEach((e=>{s[e]?r[e].forEach((t=>{s[e].find((e=>e.version===t.version))||s[e].push(t)})):s[e]=r[e]})),{shared:s,shareInfos:r}}function versionLt(e,t){const o=e=>{if(!Number.isNaN(Number(e))){const t=e.split(".");let o=e;for(let e=0;e<3-t.length;e++)o+=".0";return o}return e};return!!satisfy(o(e),`<=${o(t)}`)}const findVersion=(e,t)=>{const o=t||function(e,t){return versionLt(e,t)};return Object.keys(e).reduce(((e,t)=>e?o(e,t)||"0"===e?t:e:t),0)},isLoaded=e=>Boolean(e.loaded)||"function"==typeof e.lib;function findSingletonVersionOrderByVersion(e,t,o){const n=e[t][o];return findVersion(e[t][o],(function(e,t){return!isLoaded(n[e])&&versionLt(e,t)}))}function findSingletonVersionOrderByLoaded(e,t,o){const n=e[t][o];return findVersion(e[t][o],(function(e,t){return isLoaded(n[t])?!isLoaded(n[e])||Boolean(versionLt(e,t)):!isLoaded(n[e])&&versionLt(e,t)}))}function getFindShareFunction(e){return"loaded-first"===e?findSingletonVersionOrderByLoaded:findSingletonVersionOrderByVersion}function getRegisteredShare(e,t,o,n){if(!e)return;const{shareConfig:r,scope:s=DEFAULT_SCOPE,strategy:i}=o,a=Array.isArray(s)?s:[s];for(const s of a)if(r&&e[s]&&e[s][t]){const{requiredVersion:a}=r,l=getFindShareFunction(i)(e,s,t),c=()=>{if(r.singleton){if("string"==typeof a&&!satisfy(l,a)){const n=`Version ${l} from ${l&&e[s][t][l].from} of shared singleton module ${t} does not satisfy the requirement of ${o.from} which needs ${a})`;r.strictVersion?error$1(n):warn$1(n)}return e[s][t][l]}if(!1===a||"*"===a)return e[s][t][l];if(satisfy(l,a))return e[s][t][l];for(const[o,n]of Object.entries(e[s][t]))if(satisfy(o,a))return n},h={shareScopeMap:e,scope:s,pkgName:t,version:l,GlobalFederation:Global.__FEDERATION__,resolver:c};return(n.emit(h)||h).resolver()}}function getGlobalShareScope(){return Global.__FEDERATION__.__SHARE__}function getTargetSharedOptions(e){const{pkgName:t,extraOptions:o,shareInfos:n}=e;var r;const s=null!=(r=null==o?void 0:o.resolver)?r:e=>{if(!e)return;const t={};e.forEach((e=>{t[e.version]=e}));const o=findVersion(t,(function(e,o){return!isLoaded(t[e])&&versionLt(e,o)}));return t[o]};return Object.assign({},s(n[t]),null==o?void 0:o.customShareInfo)}share_cjs.DEFAULT_REMOTE_TYPE=DEFAULT_REMOTE_TYPE,share_cjs.DEFAULT_SCOPE=DEFAULT_SCOPE,share_cjs.Global=Global,share_cjs.addGlobalSnapshot=addGlobalSnapshot,share_cjs.addUniqueItem=addUniqueItem,share_cjs.arrayOptions=arrayOptions,share_cjs.assert=assert$1,share_cjs.error=error$1,share_cjs.formatShareConfigs=formatShareConfigs,share_cjs.getBuilderId=getBuilderId,share_cjs.getFMId=getFMId,share_cjs.getGlobalFederationConstructor=getGlobalFederationConstructor,share_cjs.getGlobalFederationInstance=getGlobalFederationInstance,share_cjs.getGlobalHostPlugins=getGlobalHostPlugins,share_cjs.getGlobalShareScope=getGlobalShareScope,share_cjs.getGlobalSnapshot=getGlobalSnapshot,share_cjs.getGlobalSnapshotInfoByModuleInfo=getGlobalSnapshotInfoByModuleInfo,share_cjs.getInfoWithoutType=getInfoWithoutType,share_cjs.getPreloaded=getPreloaded,share_cjs.getRegisteredShare=getRegisteredShare,share_cjs.getRemoteEntryExports=getRemoteEntryExports,share_cjs.getRemoteEntryInfoFromSnapshot=getRemoteEntryInfoFromSnapshot,share_cjs.getTargetSharedOptions=getTargetSharedOptions,share_cjs.getTargetSnapshotInfoByModuleInfo=getTargetSnapshotInfoByModuleInfo,share_cjs.globalLoading=globalLoading,share_cjs.isBrowserEnv=isBrowserEnv$1,share_cjs.isObject=isObject,share_cjs.isPlainObject=isPlainObject,share_cjs.isPureRemoteEntry=isPureRemoteEntry,share_cjs.isRemoteInfoWithEntry=isRemoteInfoWithEntry,share_cjs.nativeGlobal=nativeGlobal,share_cjs.registerGlobalPlugins=registerGlobalPlugins,share_cjs.resetFederationGlobalInfo=resetFederationGlobalInfo,share_cjs.safeToString=safeToString$1,share_cjs.setGlobalFederationConstructor=setGlobalFederationConstructor,share_cjs.setGlobalFederationInstance=setGlobalFederationInstance,share_cjs.setGlobalSnapshotInfoByModuleInfo=setGlobalSnapshotInfoByModuleInfo,share_cjs.setPreloaded=setPreloaded,share_cjs.warn=warn$1;var index_cjs={};Object.defineProperty(index_cjs,"__esModule",{value:!0});const FederationModuleManifest="federation-manifest.json",MANIFEST_EXT=".json",BROWSER_LOG_KEY="FEDERATION_DEBUG",BROWSER_LOG_VALUE="1",NameTransformSymbol={AT:"@",HYPHEN:"-",SLASH:"/"},NameTransformMap={[NameTransformSymbol.AT]:"scope_",[NameTransformSymbol.HYPHEN]:"_",[NameTransformSymbol.SLASH]:"__"},EncodedNameTransformMap={[NameTransformMap[NameTransformSymbol.AT]]:NameTransformSymbol.AT,[NameTransformMap[NameTransformSymbol.HYPHEN]]:NameTransformSymbol.HYPHEN,[NameTransformMap[NameTransformSymbol.SLASH]]:NameTransformSymbol.SLASH},SEPARATOR=":",ManifestFileName="mf-manifest.json",StatsFileName="mf-stats.json",MFModuleType={NPM:"npm",APP:"app"},MODULE_DEVTOOL_IDENTIFIER="__MF_DEVTOOLS_MODULE_INFO__",ENCODE_NAME_PREFIX="ENCODE_NAME_PREFIX",TEMP_DIR=".federation";var ContainerPlugin=Object.freeze({__proto__:null}),ContainerReferencePlugin=Object.freeze({__proto__:null}),ModuleFederationPlugin=Object.freeze({__proto__:null}),SharePlugin=Object.freeze({__proto__:null});function isBrowserEnv(){return"undefined"!=typeof window}function isDebugMode(){return"undefined"!=typeof process&&process.env&&process.env.FEDERATION_DEBUG?Boolean(process.env.FEDERATION_DEBUG):"undefined"!=typeof FEDERATION_DEBUG&&Boolean(FEDERATION_DEBUG)}const getProcessEnv=function(){return"undefined"!=typeof process&&process.env?process.env:{}};function safeToString(e){try{return JSON.stringify(e,null,2)}catch(e){return""}}const DEBUG_LOG="[ FEDERATION DEBUG ]";function safeGetLocalStorageItem(){try{if("undefined"!=typeof window&&window.localStorage)return localStorage.getItem(BROWSER_LOG_KEY)===BROWSER_LOG_VALUE}catch(e){return"undefined"!=typeof document}return!1}let Logger=class{info(e,t){if(this.enable){const o=safeToString(t)||"";isBrowserEnv()?console.info(`%c ${this.identifier}: ${e} ${o}`,"color:#3300CC"):console.info("[34m%s",`${this.identifier}: ${e} ${o?`\n${o}`:""}`)}}logOriginalInfo(...e){this.enable&&(isBrowserEnv(),console.info(`%c ${this.identifier}: OriginalInfo`,"color:#3300CC"),console.log(...e))}constructor(e){this.enable=!1,this.identifier=e||DEBUG_LOG,(isBrowserEnv()&&safeGetLocalStorageItem()||isDebugMode())&&(this.enable=!0)}};const LOG_CATEGORY="[ Federation Runtime ]",parseEntry=(e,t,o=SEPARATOR)=>{const n=e.split(o),r="development"===getProcessEnv().NODE_ENV&&t,s=e=>e.startsWith("http")||e.includes(MANIFEST_EXT);if(n.length>=2){let[t,...i]=n;e.startsWith(o)&&(i=[r||n.slice(-1)[0]],t=n.slice(0,-1).join(o));let a=r||i.join(o);return s(a)?{name:t,entry:a}:{name:t,version:a||"*"}}if(1===n.length){const[e]=n;return r&&s(r)?{name:e,entry:r}:{name:e,version:r||"*"}}throw`Invalid entry value: ${e}`},logger=new Logger,composeKeyWithSeparator=function(...e){return e.length?e.reduce(((e,t)=>t?e?`${e}${SEPARATOR}${t}`:t:e),""):""},encodeName=function(e,t="",o=!1){try{const n=o?".js":"";return`${t}${e.replace(new RegExp(`${NameTransformSymbol.AT}`,"g"),NameTransformMap[NameTransformSymbol.AT]).replace(new RegExp(`${NameTransformSymbol.HYPHEN}`,"g"),NameTransformMap[NameTransformSymbol.HYPHEN]).replace(new RegExp(`${NameTransformSymbol.SLASH}`,"g"),NameTransformMap[NameTransformSymbol.SLASH])}${n}`}catch(e){throw e}},decodeName=function(e,t,o){try{let n=e;if(t){if(!n.startsWith(t))return n;n=n.replace(new RegExp(t,"g"),"")}return n=n.replace(new RegExp(`${NameTransformMap[NameTransformSymbol.AT]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.AT]]).replace(new RegExp(`${NameTransformMap[NameTransformSymbol.SLASH]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.SLASH]]).replace(new RegExp(`${NameTransformMap[NameTransformSymbol.HYPHEN]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.HYPHEN]]),o&&(n=n.replace(".js","")),n}catch(e){throw e}},generateExposeFilename=(e,t)=>{if(!e)return"";let o=e;return"."===o&&(o="default_export"),o.startsWith("./")&&(o=o.replace("./","")),encodeName(o,"__federation_expose_",t)},generateShareFilename=(e,t)=>e?encodeName(e,"__federation_shared_",t):"",getResourceUrl=(e,t)=>{if("getPublicPath"in e){let o;return o=e.getPublicPath.startsWith("function")?new Function("return "+e.getPublicPath)()():new Function(e.getPublicPath)(),`${o}${t}`}return"publicPath"in e?`${e.publicPath}${t}`:(console.warn("Cannot get resource URL. If in debug mode, please ignore.",e,t),"")},assert=(e,t)=>{e||error(t)},error=e=>{throw new Error(`${LOG_CATEGORY}: ${e}`)},warn=e=>{console.warn(`${LOG_CATEGORY}: ${e}`)};function _extends$1(){return _extends$1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends$1.apply(this,arguments)}const simpleJoinRemoteEntry=(e,t)=>{if(!e)return t;const o=(e=>{if("."===e)return"";if(e.startsWith("./"))return e.replace("./","");if(e.startsWith("/")){const t=e.slice(1);return t.endsWith("/")?t.slice(0,-1):t}return e})(e);return o?o.endsWith("/")?`${o}${t}`:`${o}/${t}`:t};function inferAutoPublicPath(e){return e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/")}function generateSnapshotFromManifest(e,t={}){var o,n;const{remotes:r={},overrides:s={},version:i}=t;let a;const l=()=>"publicPath"in e.metaData?"auto"===e.metaData.publicPath&&i?inferAutoPublicPath(i):e.metaData.publicPath:e.metaData.getPublicPath,c=Object.keys(s);let h={};var u;Object.keys(r).length||(h=(null==(u=e.remotes)?void 0:u.reduce(((e,t)=>{let o;const n=t.federationContainerName;return o=c.includes(n)?s[n]:"version"in t?t.version:t.entry,e[n]={matchedVersion:o},e}),{}))||{});Object.keys(r).forEach((e=>h[e]={matchedVersion:c.includes(e)?s[e]:r[e]}));const{remoteEntry:{path:d,name:p,type:f},types:m,buildInfo:{buildVersion:_},globalName:g,ssrRemoteEntry:y}=e.metaData,{exposes:b}=e;let E={version:i||"",buildVersion:_,globalName:g,remoteEntry:simpleJoinRemoteEntry(d,p),remoteEntryType:f,remoteTypes:simpleJoinRemoteEntry(m.path,m.name),remoteTypesZip:m.zip||"",remoteTypesAPI:m.api||"",remotesInfo:h,shared:null==e?void 0:e.shared.map((e=>({assets:e.assets,sharedName:e.name,version:e.version}))),modules:null==b?void 0:b.map((e=>({moduleName:e.name,modulePath:e.path,assets:e.assets})))};if(null==(o=e.metaData)?void 0:o.prefetchInterface){E=_extends$1({},E,{prefetchInterface:e.metaData.prefetchInterface})}if(null==(n=e.metaData)?void 0:n.prefetchEntry){const{path:t,name:o,type:n}=e.metaData.prefetchEntry;E=_extends$1({},E,{prefetchEntry:simpleJoinRemoteEntry(t,o),prefetchEntryType:n})}if(a="publicPath"in e.metaData?_extends$1({},E,{publicPath:l()}):_extends$1({},E,{getPublicPath:l()}),y){const e=simpleJoinRemoteEntry(y.path,y.name);a.ssrRemoteEntry=e,a.ssrRemoteEntryType="commonjs-module"}return a}function isManifestProvider(e){return!(!("remoteEntry"in e)||!e.remoteEntry.includes(MANIFEST_EXT))}async function safeWrapper(e,t){try{return await e()}catch(e){return void(!t&&warn(e))}}function isStaticResourcesEqual(e,t){const o=/^(https?:)?\/\//i;return e.replace(o,"").replace(/\/$/,"")===t.replace(o,"").replace(/\/$/,"")}function createScript(e){let t,o=null,n=!0,r=2e4;const s=document.getElementsByTagName("script");for(let t=0;t<s.length;t++){const r=s[t],i=r.getAttribute("src");if(i&&isStaticResourcesEqual(i,e.url)){o=r,n=!1;break}}if(!o){let t;o=document.createElement("script"),o.type="text/javascript",o.src=e.url,e.createScriptHook&&(t=e.createScriptHook(e.url,e.attrs),t instanceof HTMLScriptElement?o=t:"object"==typeof t&&("script"in t&&t.script&&(o=t.script),"timeout"in t&&t.timeout&&(r=t.timeout)));const n=e.attrs;n&&!t&&Object.keys(n).forEach((e=>{o&&("async"===e||"defer"===e?o[e]=n[e]:o.getAttribute(e)||o.setAttribute(e,n[e]))}))}const i=(n,r)=>{var s;if(clearTimeout(t),o&&(o.onerror=null,o.onload=null,safeWrapper((()=>{const{needDeleteScript:t=!0}=e;t&&(null==o?void 0:o.parentNode)&&o.parentNode.removeChild(o)})),n)){var i;const t=n(r);return null==e||null==(i=e.cb)||i.call(e),t}null==e||null==(s=e.cb)||s.call(e)};return o.onerror=i.bind(null,o.onerror),o.onload=i.bind(null,o.onload),t=setTimeout((()=>{i(null,new Error(`Remote script "${e.url}" time-outed.`))}),r),{script:o,needAttach:n}}function createLink(e){let t=null,o=!0;const n=document.getElementsByTagName("link");for(let r=0;r<n.length;r++){const s=n[r],i=s.getAttribute("href"),a=s.getAttribute("ref");if(i&&isStaticResourcesEqual(i,e.url)&&a===e.attrs.ref){t=s,o=!1;break}}if(!t){let o;t=document.createElement("link"),t.setAttribute("href",e.url);const n=e.attrs;e.createLinkHook&&(o=e.createLinkHook(e.url,n),o instanceof HTMLLinkElement&&(t=o)),n&&!o&&Object.keys(n).forEach((e=>{t&&!t.getAttribute(e)&&t.setAttribute(e,n[e])}))}const r=(o,n)=>{if(t&&(t.onerror=null,t.onload=null,safeWrapper((()=>{const{needDeleteLink:o=!0}=e;o&&(null==t?void 0:t.parentNode)&&t.parentNode.removeChild(t)})),o)){const t=o(n);return e.cb(),t}e.cb()};return t.onerror=r.bind(null,t.onerror),t.onload=r.bind(null,t.onload),{link:t,needAttach:o}}function loadScript(e,t){const{attrs:o={},createScriptHook:n}=t;return new Promise(((t,r)=>{const{script:s,needAttach:i}=createScript({url:e,cb:t,attrs:_extends$1({fetchpriority:"high"},o),createScriptHook:n,needDeleteScript:!0});i&&document.head.appendChild(s)}))}function importNodeModule(e){if(!e)throw new Error("import specifier is required");return new Function("name","return import(name)")(e).then((e=>e)).catch((t=>{throw console.error(`Error importing module ${e}:`,t),t}))}const loadNodeFetch=async()=>{const e=await importNodeModule("node-fetch");return e.default||e},lazyLoaderHookFetch=async(e,t)=>{const o=__webpack_require__.federation.instance.loaderHook,n=await((e,t)=>o.lifecycle.fetch.emit(e,t))(e,t||{});if(!(n&&n instanceof Response)){return("undefined"==typeof fetch?await loadNodeFetch():fetch)(e,t||{})}return n};function createScriptNode(url,cb,attrs,createScriptHook){if(createScriptHook){const e=createScriptHook(url);e&&"object"==typeof e&&"url"in e&&(url=e.url)}let urlObj;try{urlObj=new URL(url)}catch(e){return console.error("Error constructing URL:",e),void cb(new Error(`Invalid URL: ${e}`))}const getFetch=async()=>{if("undefined"!=typeof __webpack_require__)try{if(__webpack_require__.federation.instance.loaderHook.lifecycle.fetch)return lazyLoaderHookFetch}catch(e){console.warn("federation.instance.loaderHook.lifecycle.fetch failed:",e)}return"undefined"==typeof fetch?loadNodeFetch():fetch},handleScriptFetch=async(f,urlObj)=>{try{var _vm_constants;const res=await f(urlObj.href),data=await res.text(),[path,vm]=await Promise.all([importNodeModule("path"),importNodeModule("vm")]),scriptContext={exports:{},module:{exports:{}}},urlDirname=urlObj.pathname.split("/").slice(0,-1).join("/"),filename=path.basename(urlObj.pathname);var _vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER;const script=new vm.Script(`(function(exports, module, require, __dirname, __filename) {${data}\n})`,{filename,importModuleDynamically:null!=(_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER=null==(_vm_constants=vm.constants)?void 0:_vm_constants.USE_MAIN_CONTEXT_DEFAULT_LOADER)?_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER:importNodeModule});script.runInThisContext()(scriptContext.exports,scriptContext.module,eval("require"),urlDirname,filename);const exportedInterface=scriptContext.module.exports||scriptContext.exports;if(attrs&&exportedInterface&&attrs.globalName){const e=exportedInterface[attrs.globalName]||exportedInterface;return void cb(void 0,e)}cb(void 0,exportedInterface)}catch(e){cb(e instanceof Error?e:new Error(`Script execution error: ${e}`))}};getFetch().then((e=>handleScriptFetch(e,urlObj))).catch((e=>{cb(e)}))}function loadScriptNode(e,t){return new Promise(((o,n)=>{createScriptNode(e,((e,r)=>{if(e)n(e);else{var s,i;const e=(null==t||null==(s=t.attrs)?void 0:s.globalName)||`__FEDERATION_${null==t||null==(i=t.attrs)?void 0:i.name}:custom__`,n=globalThis[e]=r;o(n)}}),t.attrs,t.createScriptHook)}))}function normalizeOptions(e,t,o){return function(n){if(!1===n)return!1;if(void 0===n)return!!e&&t;if(!0===n)return t;if(n&&"object"==typeof n)return _extends$1({},t,n);throw new Error(`Unexpected type for \`${o}\`, expect boolean/undefined/object, got: ${typeof n}`)}}function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends.apply(this,arguments)}index_cjs.BROWSER_LOG_KEY=BROWSER_LOG_KEY,index_cjs.BROWSER_LOG_VALUE=BROWSER_LOG_VALUE,index_cjs.ENCODE_NAME_PREFIX=ENCODE_NAME_PREFIX,index_cjs.EncodedNameTransformMap=EncodedNameTransformMap,index_cjs.FederationModuleManifest=FederationModuleManifest,index_cjs.Logger=Logger,index_cjs.MANIFEST_EXT=MANIFEST_EXT,index_cjs.MFModuleType=MFModuleType,index_cjs.MODULE_DEVTOOL_IDENTIFIER=MODULE_DEVTOOL_IDENTIFIER,index_cjs.ManifestFileName=ManifestFileName,index_cjs.NameTransformMap=NameTransformMap,index_cjs.NameTransformSymbol=NameTransformSymbol,index_cjs.SEPARATOR=SEPARATOR,index_cjs.StatsFileName=StatsFileName,index_cjs.TEMP_DIR=TEMP_DIR,index_cjs.assert=assert,index_cjs.composeKeyWithSeparator=composeKeyWithSeparator,index_cjs.containerPlugin=ContainerPlugin,index_cjs.containerReferencePlugin=ContainerReferencePlugin,index_cjs.createLink=createLink,index_cjs.createScript=createScript,index_cjs.createScriptNode=createScriptNode,index_cjs.decodeName=decodeName,index_cjs.encodeName=encodeName,index_cjs.error=error,index_cjs.generateExposeFilename=generateExposeFilename,index_cjs.generateShareFilename=generateShareFilename,index_cjs.generateSnapshotFromManifest=generateSnapshotFromManifest,index_cjs.getProcessEnv=getProcessEnv,index_cjs.getResourceUrl=getResourceUrl,index_cjs.inferAutoPublicPath=inferAutoPublicPath,index_cjs.isBrowserEnv=isBrowserEnv,index_cjs.isDebugMode=isDebugMode,index_cjs.isManifestProvider=isManifestProvider,index_cjs.isStaticResourcesEqual=isStaticResourcesEqual,index_cjs.loadScript=loadScript,index_cjs.loadScriptNode=loadScriptNode,index_cjs.logger=logger,index_cjs.moduleFederationPlugin=ModuleFederationPlugin,index_cjs.normalizeOptions=normalizeOptions,index_cjs.parseEntry=parseEntry,index_cjs.safeWrapper=safeWrapper,index_cjs.sharePlugin=SharePlugin,index_cjs.simpleJoinRemoteEntry=simpleJoinRemoteEntry,index_cjs.warn=warn,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=share_cjs,o=index_cjs;function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},n.apply(this,arguments)}async function r({remoteInfo:e,remoteEntryExports:n,createScriptHook:r}){const{entry:s,entryGlobalName:i,name:a,type:l}=e;switch(l){case"esm":case"module":return async function({entry:e,remoteEntryExports:t}){return new Promise(((o,n)=>{try{t?o(t):new Function("callbacks",`import("${e}").then(callbacks[0]).catch(callbacks[1])`)([o,n])}catch(e){n(e)}}))}({entry:s,remoteEntryExports:n});case"system":return async function({entry:e,remoteEntryExports:t}){return new Promise(((o,n)=>{try{t?o(t):new Function("callbacks",`System.import("${e}").then(callbacks[0]).catch(callbacks[1])`)([o,n])}catch(e){n(e)}}))}({entry:s,remoteEntryExports:n});default:return async function({name:e,globalName:n,entry:r,createScriptHook:s}){const{entryExports:i}=t.getRemoteEntryExports(e,n);return i||o.loadScript(r,{attrs:{},createScriptHook:(e,t)=>{const o=s.emit({url:e,attrs:t});if(o)return o instanceof HTMLScriptElement||"script"in o||"timeout"in o?o:void 0}}).then((()=>{const{remoteEntryKey:o,entryExports:s}=t.getRemoteEntryExports(e,n);return t.assert(s,`\n      Unable to use the ${e}'s '${r}' URL with ${o}'s globalName to get remoteEntry exports.\n      Possible reasons could be:\n\n      1. '${r}' is not the correct URL, or the remoteEntry resource or name is incorrect.\n\n      2. ${o} cannot be used to get remoteEntry exports in the window object.\n    `),s})).catch((e=>{throw e}))}({entry:s,globalName:i,name:a,createScriptHook:r})}}function s(e){const{entry:t,name:n}=e;return o.composeKeyWithSeparator(n,t)}async function i({origin:e,remoteEntryExports:n,remoteInfo:i}){const a=s(i);if(n)return n;if(!t.globalLoading[a]){const s=e.remoteHandler.hooks.lifecycle.loadEntry;if(s.listeners.size)t.globalLoading[a]=s.emit({createScriptHook:e.loaderHook.lifecycle.createScript,remoteInfo:i,remoteEntryExports:n}).then((e=>e||void 0));else{const s=e.loaderHook.lifecycle.createScript;o.isBrowserEnv()?t.globalLoading[a]=r({remoteInfo:i,remoteEntryExports:n,createScriptHook:s}):t.globalLoading[a]=async function({remoteInfo:e,createScriptHook:n}){const{entry:r,entryGlobalName:s,name:i}=e,{entryExports:a}=t.getRemoteEntryExports(i,s);return a||o.loadScriptNode(r,{attrs:{name:i,globalName:s},createScriptHook:(e,t)=>{const o=n.emit({url:e,attrs:t});if(o)return"url"in o?o:void 0}}).then((()=>{const{remoteEntryKey:e,entryExports:o}=t.getRemoteEntryExports(i,s);return t.assert(o,`\n      Unable to use the ${i}'s '${r}' URL with ${e}'s globalName to get remoteEntry exports.\n      Possible reasons could be:\n\n      1. '${r}' is not the correct URL, or the remoteEntry resource or name is incorrect.\n\n      2. ${e} cannot be used to get remoteEntry exports in the window object.\n    `),o})).catch((e=>{throw e}))}({remoteInfo:i,createScriptHook:s})}}return t.globalLoading[a]}function a(e){return n({},e,{entry:"entry"in e?e.entry:"",type:e.type||t.DEFAULT_REMOTE_TYPE,entryGlobalName:e.entryGlobalName||e.name,shareScope:e.shareScope||t.DEFAULT_SCOPE})}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},l.apply(this,arguments)}let c=class{async getEntry(){if(this.remoteEntryExports)return this.remoteEntryExports;const e=await i({origin:this.host,remoteInfo:this.remoteInfo,remoteEntryExports:this.remoteEntryExports});return t.assert(e,`remoteEntryExports is undefined \n ${t.safeToString(this.remoteInfo)}`),this.remoteEntryExports=e,this.remoteEntryExports}async get(e,o,n){const{loadFactory:r=!0}=n||{loadFactory:!0},s=await this.getEntry();if(!this.inited){const e=this.host.shareScopeMap,t=this.remoteInfo.shareScope||"default";e[t]||(e[t]={});const o=e[t],n=[],r={version:this.remoteInfo.version||""};Object.defineProperty(r,"shareScopeMap",{value:e,enumerable:!1});const i=await this.host.hooks.lifecycle.beforeInitContainer.emit({shareScope:o,remoteEntryInitOptions:r,initScope:n,remoteInfo:this.remoteInfo,origin:this.host});void 0===(null==s?void 0:s.init)&&console.error('The remote entry interface does not contain "init"',"\n","Ensure the name of this remote is not reserved or in use. Check if anything already exists on window[nameOfRemote]","\n","Ensure that window[nameOfRemote] is returning a {get,init} object."),await s.init(i.shareScope,i.initScope,i.remoteEntryInitOptions),await this.host.hooks.lifecycle.initContainer.emit(l({},i,{remoteEntryExports:s}))}this.lib=s,this.inited=!0;const i=await s.get(o);t.assert(i,`${t.getFMId(this.remoteInfo)} remote don't export ${o}.`);const a=this.wraperFactory(i,e);if(!r)return a;return await a()}wraperFactory(e,t){function o(e,t){e&&"object"==typeof e&&Object.isExtensible(e)&&!Object.getOwnPropertyDescriptor(e,Symbol.for("mf_module_id"))&&Object.defineProperty(e,Symbol.for("mf_module_id"),{value:t,enumerable:!1})}return e instanceof Promise?async()=>{const n=await e();return o(n,t),n}:()=>{const n=e();return o(n,t),n}}constructor({remoteInfo:e,host:t}){this.inited=!1,this.lib=void 0,this.remoteInfo=e,this.host=t}};class h{on(e){"function"==typeof e&&this.listeners.add(e)}once(e){const t=this;this.on((function o(...n){return t.remove(o),e.apply(null,n)}))}emit(...e){let t;return this.listeners.size>0&&this.listeners.forEach((o=>{t=o(...e)})),t}remove(e){this.listeners.delete(e)}removeAll(){this.listeners.clear()}constructor(e){this.type="",this.listeners=new Set,e&&(this.type=e)}}class u extends h{emit(...e){let t;const o=Array.from(this.listeners);if(o.length>0){let n=0;const r=t=>!1!==t&&(n<o.length?Promise.resolve(o[n++].apply(null,e)).then(r):t);t=r()}return Promise.resolve(t)}}function d(e,o){if(!t.isObject(o))return!1;if(e!==o)for(const t in e)if(!(t in o))return!1;return!0}class p extends h{emit(e){t.isObject(e)||t.error(`The data for the "${this.type}" hook should be an object.`);for(const o of this.listeners)try{const t=o(e);if(!d(e,t)){this.onerror(`A plugin returned an unacceptable value for the "${this.type}" type.`);break}e=t}catch(e){t.warn(e),this.onerror(e)}return e}constructor(e){super(),this.onerror=t.error,this.type=e}}class f extends h{emit(e){t.isObject(e)||t.error(`The response data for the "${this.type}" hook must be an object.`);const o=Array.from(this.listeners);if(o.length>0){let n=0;const r=o=>(t.warn(o),this.onerror(o),e),s=t=>{if(d(e,t)){if(e=t,n<o.length)try{return Promise.resolve(o[n++](e)).then(s,r)}catch(e){return r(e)}}else this.onerror(`A plugin returned an incorrect value for the "${this.type}" type.`);return e};return Promise.resolve(s(e))}return Promise.resolve(e)}constructor(e){super(),this.onerror=t.error,this.type=e}}class m{applyPlugin(e){t.assert(t.isPlainObject(e),"Plugin configuration is invalid.");const o=e.name;t.assert(o,"A name must be provided by the plugin."),this.registerPlugins[o]||(this.registerPlugins[o]=e,Object.keys(this.lifecycle).forEach((t=>{const o=e[t];o&&this.lifecycle[t].on(o)})))}removePlugin(e){t.assert(e,"A name is required.");const o=this.registerPlugins[e];t.assert(o,`The plugin "${e}" is not registered.`),Object.keys(o).forEach((e=>{"name"!==e&&this.lifecycle[e].remove(o[e])}))}inherit({lifecycle:e,registerPlugins:o}){Object.keys(e).forEach((o=>{t.assert(!this.lifecycle[o],`The hook "${o}" has a conflict and cannot be inherited.`),this.lifecycle[o]=e[o]})),Object.keys(o).forEach((e=>{t.assert(!this.registerPlugins[e],`The plugin "${e}" has a conflict and cannot be inherited.`),this.applyPlugin(o[e])}))}constructor(e){this.registerPlugins={},this.lifecycle=e,this.lifecycleKeys=Object.keys(e)}}function _(){return _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_.apply(this,arguments)}function g(e){return _({resourceCategory:"sync",share:!0,depsRemote:!0,prefetchInterface:!1},e)}function y(e,t,n,r=!0){const{cssAssets:s,jsAssetsWithoutEntry:a,entryAssets:l}=n;if(t.options.inBrowser){if(l.forEach((o=>{const{moduleInfo:n}=o,r=t.moduleCache.get(e.name);i(r?{origin:t,remoteInfo:n,remoteEntryExports:r.remoteEntryExports}:{origin:t,remoteInfo:n,remoteEntryExports:void 0})})),r){const e={rel:"preload",as:"style",crossorigin:"anonymous"};s.forEach((n=>{const{link:r,needAttach:s}=o.createLink({url:n,cb:()=>{},attrs:e,createLinkHook:(e,o)=>{const n=t.loaderHook.lifecycle.createLink.emit({url:e,attrs:o});if(n instanceof HTMLLinkElement)return n}});s&&document.head.appendChild(r)}))}else{const e={rel:"stylesheet",type:"text/css"};s.forEach((n=>{const{link:r,needAttach:s}=o.createLink({url:n,cb:()=>{},attrs:e,createLinkHook:(e,o)=>{const n=t.loaderHook.lifecycle.createLink.emit({url:e,attrs:o});if(n instanceof HTMLLinkElement)return n},needDeleteLink:!1});s&&document.head.appendChild(r)}))}if(r){const e={rel:"preload",as:"script",crossorigin:"anonymous"};a.forEach((n=>{const{link:r,needAttach:s}=o.createLink({url:n,cb:()=>{},attrs:e,createLinkHook:(e,o)=>{const n=t.loaderHook.lifecycle.createLink.emit({url:e,attrs:o});if(n instanceof HTMLLinkElement)return n}});s&&document.head.appendChild(r)}))}else{const n={fetchpriority:"high",type:"module"===(null==e?void 0:e.type)?"module":"text/javascript"};a.forEach((e=>{const{script:r,needAttach:s}=o.createScript({url:e,cb:()=>{},attrs:n,createScriptHook:(e,o)=>{const n=t.loaderHook.lifecycle.createScript.emit({url:e,attrs:o});if(n instanceof HTMLScriptElement)return n},needDeleteScript:!0});s&&document.head.appendChild(r)}))}}}function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},b.apply(this,arguments)}function E(e,n){const r=t.getRemoteEntryInfoFromSnapshot(n);r.url||t.error(`The attribute remoteEntry of ${e.name} must not be undefined.`);let s=o.getResourceUrl(n,r.url);t.isBrowserEnv()||s.startsWith("http")||(s=`https:${s}`),e.type=r.type,e.entryGlobalName=r.globalName,e.entry=s,e.version=n.version,e.buildVersion=n.buildVersion}function $(e){const t=e.split(":");return 1===t.length?{name:t[0],version:void 0}:2===t.length?{name:t[0],version:t[1]}:{name:t[1],version:t[2]}}function S(e,n,r,s,i={},a){const l=t.getFMId(n),{value:c}=t.getInfoWithoutType(e,l),h=a||c;if(h&&!o.isManifestProvider(h)&&(r(h,n,s),h.remotesInfo)){const t=Object.keys(h.remotesInfo);for(const o of t){if(i[o])continue;i[o]=!0;const t=$(o),n=h.remotesInfo[o];S(e,{name:t.name,version:n.matchedVersion},r,!1,i,void 0)}}}function v(e,n,r,s,i){const a=[],l=[],c=[],h=new Set,u=new Set,{options:d}=e,{preloadConfig:p}=n,{depsRemote:f}=p;if(S(s,r,((n,r,s)=>{let i;if(s)i=p;else if(Array.isArray(f)){const e=f.find((e=>e.nameOrAlias===r.name||e.nameOrAlias===r.alias));if(!e)return;i=g(e)}else{if(!0!==f)return;i=p}const h=o.getResourceUrl(n,t.getRemoteEntryInfoFromSnapshot(n).url);h&&c.push({name:r.name,moduleInfo:{name:r.name,entry:h,type:"remoteEntryType"in n?n.remoteEntryType:"global",entryGlobalName:"globalName"in n?n.globalName:r.name,shareScope:"",version:"version"in n?n.version:void 0},url:h});let u="modules"in n?n.modules:[];const d=(m=i.exposes)?m.map((e=>"."===e?e:e.startsWith("./")?e.replace("./",""):e)):[];var m,_;d.length&&"modules"in n&&(u=null==n||null==(_=n.modules)?void 0:_.reduce(((e,t)=>(-1!==(null==d?void 0:d.indexOf(t.moduleName))&&e.push(t),e)),[]));function y(e){const t=e.map((e=>o.getResourceUrl(n,e)));return i.filter?t.filter(i.filter):t}if(u){const o=u.length;for(let s=0;s<o;s++){const o=u[s],c=`${r.name}/${o.moduleName}`;e.remoteHandler.hooks.lifecycle.handlePreloadModule.emit({id:"."===o.moduleName?r.name:c,name:r.name,remoteSnapshot:n,preloadConfig:i,remote:r,origin:e});t.getPreloaded(c)||("all"===i.resourceCategory?(a.push(...y(o.assets.css.async)),a.push(...y(o.assets.css.sync)),l.push(...y(o.assets.js.async)),l.push(...y(o.assets.js.sync))):(i.resourceCategory="sync")&&(a.push(...y(o.assets.css.sync)),l.push(...y(o.assets.js.sync))),t.setPreloaded(c))}}}),!0,{},i),i.shared){const o=(o,n)=>{const r=t.getRegisteredShare(e.shareScopeMap,n.sharedName,o,e.sharedHandler.hooks.lifecycle.resolveShare);r&&"function"==typeof r.lib&&(n.assets.js.sync.forEach((e=>{h.add(e)})),n.assets.css.sync.forEach((e=>{u.add(e)})))};i.shared.forEach((e=>{var n;const r=null==(n=d.shared)?void 0:n[e.sharedName];if(!r)return;const s=e.version?r.find((t=>t.version===e.version)):r;if(!s)return;t.arrayOptions(s).forEach((t=>{o(t,e)}))}))}const m=l.filter((e=>!h.has(e)));return{cssAssets:a.filter((e=>!u.has(e))),jsAssetsWithoutEntry:m,entryAssets:c}}function R(){return R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},R.apply(this,arguments)}function I(e,o){const n=t.getGlobalSnapshotInfoByModuleInfo({name:o.options.name,version:o.options.version}),r=n&&"remotesInfo"in n&&n.remotesInfo&&t.getInfoWithoutType(n.remotesInfo,e.name).value;return r&&r.matchedVersion?{hostGlobalSnapshot:n,globalSnapshot:t.getGlobalSnapshot(),remoteSnapshot:t.getGlobalSnapshotInfoByModuleInfo({name:e.name,version:r.matchedVersion})}:{hostGlobalSnapshot:void 0,globalSnapshot:t.getGlobalSnapshot(),remoteSnapshot:t.getGlobalSnapshotInfoByModuleInfo({name:e.name,version:"version"in e?e.version:void 0})}}class O{async loadSnapshot(e){const{options:t}=this.HostInstance,{hostGlobalSnapshot:o,remoteSnapshot:n,globalSnapshot:r}=this.getGlobalRemoteInfo(e),{remoteSnapshot:s,globalSnapshot:i}=await this.hooks.lifecycle.loadSnapshot.emit({options:t,moduleInfo:e,hostGlobalSnapshot:o,remoteSnapshot:n,globalSnapshot:r});return{remoteSnapshot:s,globalSnapshot:i}}async loadRemoteSnapshotInfo(e){const{options:n}=this.HostInstance;await this.hooks.lifecycle.beforeLoadRemoteSnapshot.emit({options:n,moduleInfo:e});let r=t.getGlobalSnapshotInfoByModuleInfo({name:this.HostInstance.options.name,version:this.HostInstance.options.version});r||(r={version:this.HostInstance.options.version||"",remoteEntry:"",remotesInfo:{}},t.addGlobalSnapshot({[this.HostInstance.options.name]:r})),r&&"remotesInfo"in r&&!t.getInfoWithoutType(r.remotesInfo,e.name).value&&("version"in e||"entry"in e)&&(r.remotesInfo=R({},null==r?void 0:r.remotesInfo,{[e.name]:{matchedVersion:"version"in e?e.version:e.entry}}));const{hostGlobalSnapshot:s,remoteSnapshot:i,globalSnapshot:a}=this.getGlobalRemoteInfo(e),{remoteSnapshot:l,globalSnapshot:c}=await this.hooks.lifecycle.loadSnapshot.emit({options:n,moduleInfo:e,hostGlobalSnapshot:s,remoteSnapshot:i,globalSnapshot:a});if(l){if(o.isManifestProvider(l)){const o=t.isBrowserEnv()?l.remoteEntry:l.ssrRemoteEntry||l.remoteEntry||"",n=await this.getManifestJson(o,e,{});return{remoteSnapshot:n,globalSnapshot:t.setGlobalSnapshotInfoByModuleInfo(R({},e,{entry:o}),n)}}{const{remoteSnapshot:t}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:e,remoteSnapshot:l,from:"global"});return{remoteSnapshot:t,globalSnapshot:c}}}if(t.isRemoteInfoWithEntry(e)){const o=await this.getManifestJson(e.entry,e,{}),n=t.setGlobalSnapshotInfoByModuleInfo(e,o),{remoteSnapshot:r}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:e,remoteSnapshot:o,from:"global"});return{remoteSnapshot:r,globalSnapshot:n}}t.error(`\n          Cannot get remoteSnapshot with the name: '${e.name}', version: '${e.version}' from __FEDERATION__.moduleInfo. The following reasons may be causing the problem:\n\n          1. The Deploy platform did not deliver the correct data. You can use __FEDERATION__.moduleInfo to check the remoteInfo.\n\n          2. The remote '${e.name}' version '${e.version}' is not released.\n\n          The transformed module info: ${JSON.stringify(c)}\n        `)}getGlobalRemoteInfo(e){return I(e,this.HostInstance)}async getManifestJson(e,n,r){const s=async()=>{let o=this.manifestCache.get(e);if(o)return o;try{let n=await this.loaderHook.lifecycle.fetch.emit(e,{});return n&&n instanceof Response||(n=await fetch(e,{})),o=await n.json(),t.assert(o.metaData&&o.exposes&&o.shared,`${e} is not a federation manifest`),this.manifestCache.set(e,o),o}catch(o){delete this.manifestLoading[e],t.error(`Failed to get manifestJson for ${n.name}. The manifest URL is ${e}. Please ensure that the manifestUrl is accessible.\n          \n Error message:\n          \n ${o}`)}},i=async()=>{const t=await s(),r=o.generateSnapshotFromManifest(t,{version:e}),{remoteSnapshot:i}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:n,manifestJson:t,remoteSnapshot:r,manifestUrl:e,from:"manifest"});return i};return this.manifestLoading[e]||(this.manifestLoading[e]=i().then((e=>e))),this.manifestLoading[e]}constructor(e){this.loadingHostSnapshot=null,this.manifestCache=new Map,this.hooks=new m({beforeLoadRemoteSnapshot:new u("beforeLoadRemoteSnapshot"),loadSnapshot:new f("loadGlobalSnapshot"),loadRemoteSnapshot:new f("loadRemoteSnapshot")}),this.manifestLoading=t.Global.__FEDERATION__.__MANIFEST_LOADING__,this.HostInstance=e,this.loaderHook=e.loaderHook}}function A(){return A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},A.apply(this,arguments)}class T{registerShared(e,o){const{shareInfos:n,shared:r}=t.formatShareConfigs(e,o);return Object.keys(n).forEach((e=>{n[e].forEach((n=>{!t.getRegisteredShare(this.shareScopeMap,e,n,this.hooks.lifecycle.resolveShare)&&n&&n.lib&&this.setShared({pkgName:e,lib:n.lib,get:n.get,loaded:!0,shared:n,from:o.name})}))})),{shareInfos:n,shared:r}}async loadShare(e,o){const{host:n}=this,r=t.getTargetSharedOptions({pkgName:e,extraOptions:o,shareInfos:n.options.shared});(null==r?void 0:r.scope)&&await Promise.all(r.scope.map((async e=>{await Promise.all(this.initializeSharing(e,r.strategy))})));const s=await this.hooks.lifecycle.beforeLoadShare.emit({pkgName:e,shareInfo:r,shared:n.options.shared,origin:n}),{shareInfo:i}=s;t.assert(i,`Cannot find ${e} Share in the ${n.options.name}. Please ensure that the ${e} Share parameters have been injected`);const a=t.getRegisteredShare(this.shareScopeMap,e,i,this.hooks.lifecycle.resolveShare),l=e=>{e.useIn||(e.useIn=[]),t.addUniqueItem(e.useIn,n.options.name)};if(a&&a.lib)return l(a),a.lib;if(a&&a.loading&&!a.loaded){const e=await a.loading;return a.loaded=!0,a.lib||(a.lib=e),l(a),e}if(a){const o=(async()=>{const o=await a.get();i.lib=o,i.loaded=!0,l(i);const n=t.getRegisteredShare(this.shareScopeMap,e,i,this.hooks.lifecycle.resolveShare);return n&&(n.lib=o,n.loaded=!0),o})();return this.setShared({pkgName:e,loaded:!1,shared:a,from:n.options.name,lib:null,loading:o}),o}{if(null==o?void 0:o.customShareInfo)return!1;const r=(async()=>{const o=await i.get();i.lib=o,i.loaded=!0,l(i);const n=t.getRegisteredShare(this.shareScopeMap,e,i,this.hooks.lifecycle.resolveShare);return n&&(n.lib=o,n.loaded=!0),o})();return this.setShared({pkgName:e,loaded:!1,shared:i,from:n.options.name,lib:null,loading:r}),r}}initializeSharing(e=t.DEFAULT_SCOPE,o){const{host:n}=this,r=this.shareScopeMap,s=n.options.name;r[e]||(r[e]={});const i=r[e],a=[],l=async t=>{const{module:o}=await n.remoteHandler.getRemoteModuleAndOptions({id:t});if(o.getEntry){const t=await o.getEntry();o.inited||((s=t)&&s.init&&s.init(r[e]),o.inited=!0)}var s};return Object.keys(n.options.shared).forEach((t=>{n.options.shared[t].forEach((o=>{o.scope.includes(e)&&((e,t)=>{var o;const{version:n,eager:r}=t;i[e]=i[e]||{};const a=i[e],l=a[n],c=Boolean(l&&(l.eager||(null==(o=l.shareConfig)?void 0:o.eager)));(!l||"loaded-first"!==l.strategy&&!l.loaded&&(Boolean(!r)!==!c?r:s>l.from))&&(a[n]=t)})(t,o)}))})),"version-first"===o&&n.options.remotes.forEach((t=>{t.shareScope===e&&a.push(l(t.name))})),a}loadShareSync(e,o){const{host:n}=this,r=t.getTargetSharedOptions({pkgName:e,extraOptions:o,shareInfos:n.options.shared});(null==r?void 0:r.scope)&&r.scope.forEach((e=>{this.initializeSharing(e,r.strategy)}));const s=t.getRegisteredShare(this.shareScopeMap,e,r,this.hooks.lifecycle.resolveShare),i=e=>{e.useIn||(e.useIn=[]),t.addUniqueItem(e.useIn,n.options.name)};if(s){if("function"==typeof s.lib)return i(s),s.loaded||(s.loaded=!0,s.from===n.options.name&&(r.loaded=!0)),s.lib;if("function"==typeof s.get){const t=s.get();if(!(t instanceof Promise))return i(s),this.setShared({pkgName:e,loaded:!0,from:n.options.name,lib:t,shared:s}),t}}if(r.lib)return r.loaded||(r.loaded=!0),r.lib;if(r.get){const t=r.get();if(t instanceof Promise)throw new Error(`\n        The loadShareSync function was unable to load ${e}. The ${e} could not be found in ${n.options.name}.\n        Possible reasons for failure: \n\n        1. The ${e} share was registered with the 'get' attribute, but loadShare was not used beforehand.\n\n        2. The ${e} share was not registered with the 'lib' attribute.\n\n      `);return r.lib=t,this.setShared({pkgName:e,loaded:!0,from:n.options.name,lib:r.lib,shared:r}),r.lib}throw new Error(`\n        The loadShareSync function was unable to load ${e}. The ${e} could not be found in ${n.options.name}.\n        Possible reasons for failure: \n\n        1. The ${e} share was registered with the 'get' attribute, but loadShare was not used beforehand.\n\n        2. The ${e} share was not registered with the 'lib' attribute.\n\n      `)}initShareScopeMap(e,t,o={}){const{host:n}=this;this.shareScopeMap[e]=t,this.hooks.lifecycle.initContainerShareScopeMap.emit({shareScope:t,options:n.options,origin:n,scopeName:e,hostShareScopeMap:o.hostShareScopeMap})}setShared({pkgName:e,shared:t,from:o,lib:n,loading:r,loaded:s,get:i}){const{version:a,scope:l="default"}=t,c=function(e,t){if(null==e)return{};var o,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)o=s[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(t,["version","scope"]);(Array.isArray(l)?l:[l]).forEach((t=>{this.shareScopeMap[t]||(this.shareScopeMap[t]={}),this.shareScopeMap[t][e]||(this.shareScopeMap[t][e]={}),this.shareScopeMap[t][e][a]||(this.shareScopeMap[t][e][a]=A({version:a,scope:["default"]},c,{lib:n,loaded:s,loading:r}),i&&(this.shareScopeMap[t][e][a].get=i))}))}_setGlobalShareScopeMap(e){const o=t.getGlobalShareScope(),n=e.id||e.name;n&&!o[n]&&(o[n]=this.shareScopeMap)}constructor(e){this.hooks=new m({afterResolve:new f("afterResolve"),beforeLoadShare:new f("beforeLoadShare"),loadShare:new u,resolveShare:new p("resolveShare"),initContainerShareScopeMap:new p("initContainerShareScopeMap")}),this.host=e,this.shareScopeMap={},this._setGlobalShareScopeMap(e.options)}}function w(){return w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},w.apply(this,arguments)}class N{formatAndRegisterRemote(e,t){return(t.remotes||[]).reduce(((e,t)=>(this.registerRemote(t,e,{force:!1}),e)),e.remotes)}setIdToRemoteMap(e,t){const{remote:o,expose:n}=t,{name:r,alias:s}=o;if(this.idToRemoteMap[e]={name:o.name,expose:n},s&&e.startsWith(r)){const t=e.replace(r,s);this.idToRemoteMap[t]={name:o.name,expose:n}}else if(s&&e.startsWith(s)){const t=e.replace(s,r);this.idToRemoteMap[t]={name:o.name,expose:n}}}async loadRemote(e,t){const{host:o}=this;try{const{loadFactory:n=!0}=t||{loadFactory:!0},{module:r,moduleOptions:s,remoteMatchInfo:i}=await this.getRemoteModuleAndOptions({id:e}),{pkgNameOrAlias:a,remote:l,expose:c,id:h}=i,u=await r.get(h,c,t),d=await this.hooks.lifecycle.onLoad.emit({id:h,pkgNameOrAlias:a,expose:c,exposeModule:n?u:void 0,exposeModuleFactory:n?void 0:u,remote:l,options:s,moduleInstance:r,origin:o});return this.setIdToRemoteMap(e,i),"function"==typeof d?d:u}catch(n){const{from:r="runtime"}=t||{from:"runtime"},s=await this.hooks.lifecycle.errorLoadRemote.emit({id:e,error:n,from:r,lifecycle:"onLoad",origin:o});if(!s)throw n;return s}}async preloadRemote(e){const{host:o}=this;await this.hooks.lifecycle.beforePreloadRemote.emit({preloadOps:e,options:o.options,origin:o});const n=function(e,o){return o.map((o=>{const n=function(e,t){for(const o of e){if(t===o.name)return o;if(o.alias&&t===o.alias)return o}}(e,o.nameOrAlias);return t.assert(n,`Unable to preload ${o.nameOrAlias} as it is not included in ${!n&&t.safeToString({remoteInfo:n,remotes:e})}`),{remote:n,preloadConfig:g(o)}}))}(o.options.remotes,e);await Promise.all(n.map((async e=>{const{remote:t}=e,n=a(t),{globalSnapshot:r,remoteSnapshot:s}=await o.snapshotHandler.loadRemoteSnapshotInfo(t),i=await this.hooks.lifecycle.generatePreloadAssets.emit({origin:o,preloadOptions:e,remote:t,remoteInfo:n,globalSnapshot:r,remoteSnapshot:s});i&&y(n,o,i)})))}registerRemotes(e,t){const{host:o}=this;e.forEach((e=>{this.registerRemote(e,o.options.remotes,{force:null==t?void 0:t.force})}))}async getRemoteModuleAndOptions(e){const{host:o}=this,{id:n}=e;let r;try{r=await this.hooks.lifecycle.beforeRequest.emit({id:n,options:o.options,origin:o})}catch(e){if(r=await this.hooks.lifecycle.errorLoadRemote.emit({id:n,options:o.options,origin:o,from:"runtime",error:e,lifecycle:"beforeRequest"}),!r)throw e}const{id:s}=r,i=function(e,t){for(const o of e){const e=t.startsWith(o.name);let n=t.replace(o.name,"");if(e){if(n.startsWith("/"))return n=`.${n}`,{pkgNameOrAlias:o.name,expose:n,remote:o};if(""===n)return{pkgNameOrAlias:o.name,expose:".",remote:o}}const r=o.alias&&t.startsWith(o.alias);let s=o.alias&&t.replace(o.alias,"");if(o.alias&&r){if(s&&s.startsWith("/"))return s=`.${s}`,{pkgNameOrAlias:o.alias,expose:s,remote:o};if(""===s)return{pkgNameOrAlias:o.alias,expose:".",remote:o}}}}(o.options.remotes,s);t.assert(i,`\n        Unable to locate ${s} in ${o.options.name}. Potential reasons for failure include:\n\n        1. ${s} was not included in the 'remotes' parameter of ${o.options.name||"the host"}.\n\n        2. ${s} could not be found in the 'remotes' of ${o.options.name} with either 'name' or 'alias' attributes.\n        3. ${s} is not online, injected, or loaded.\n        4. ${s}  cannot be accessed on the expected.\n        5. The 'beforeRequest' hook was provided but did not return the correct 'remoteInfo' when attempting to load ${s}.\n      `);const{remote:l}=i,h=a(l),u=await o.sharedHandler.hooks.lifecycle.afterResolve.emit(w({id:s},i,{options:o.options,origin:o,remoteInfo:h})),{remote:d,expose:p}=u;t.assert(d&&p,`The 'beforeRequest' hook was executed, but it failed to return the correct 'remote' and 'expose' values while loading ${s}.`);let f=o.moduleCache.get(d.name);const m={host:o,remoteInfo:h};return f||(f=new c(m),o.moduleCache.set(d.name,f)),{module:f,moduleOptions:m,remoteMatchInfo:u}}registerRemote(e,n,r){const{host:s}=this,i=()=>{if(e.alias){const o=n.find((t=>{var o;return e.alias&&(t.name.startsWith(e.alias)||(null==(o=t.alias)?void 0:o.startsWith(e.alias)))}));t.assert(!o,`The alias ${e.alias} of remote ${e.name} is not allowed to be the prefix of ${o&&o.name} name or alias`)}"entry"in e&&o.isBrowserEnv()&&!e.entry.startsWith("http")&&(e.entry=new URL(e.entry,window.location.origin).href),e.shareScope||(e.shareScope=t.DEFAULT_SCOPE),e.type||(e.type=t.DEFAULT_REMOTE_TYPE)};this.hooks.lifecycle.beforeRegisterRemote.emit({remote:e,origin:s});const a=n.find((t=>t.name===e.name));if(a){const t=[`The remote "${e.name}" is already registered.`,(null==r?void 0:r.force)?"Hope you have known that OVERRIDE it may have some unexpected errors":'If you want to merge the remote, you can set "force: true".'];(null==r?void 0:r.force)&&(this.removeRemote(a),i(),n.push(e),this.hooks.lifecycle.registerRemote.emit({remote:e,origin:s})),o.warn(t.join(" "))}else i(),n.push(e),this.hooks.lifecycle.registerRemote.emit({remote:e,origin:s})}removeRemote(e){try{const{host:r}=this,{name:i}=e,a=r.options.remotes.findIndex((e=>e.name===i));-1!==a&&r.options.remotes.splice(a,1);const l=r.moduleCache.get(e.name);if(l){const i=l.remoteInfo,a=i.entryGlobalName;var n;if(globalThis[a])(null==(n=Object.getOwnPropertyDescriptor(globalThis,a))?void 0:n.configurable)?delete globalThis[a]:globalThis[a]=void 0;const c=s(l.remoteInfo);t.globalLoading[c]&&delete t.globalLoading[c],r.snapshotHandler.manifestCache.delete(i.entry);let h=i.buildVersion?o.composeKeyWithSeparator(i.name,i.buildVersion):i.name;const u=globalThis.__FEDERATION__.__INSTANCES__.findIndex((e=>i.buildVersion?e.options.id===h:e.name===h));if(-1!==u){const e=globalThis.__FEDERATION__.__INSTANCES__[u];h=e.options.id||h;const o=t.getGlobalShareScope();let n=!0;const r=[];Object.keys(o).forEach((e=>{const t=o[e];t&&Object.keys(t).forEach((o=>{const s=t[o];s&&Object.keys(s).forEach((t=>{const a=s[t];a&&Object.keys(a).forEach((s=>{const l=a[s];l&&"object"==typeof l&&l.from===i.name&&(l.loaded||l.loading?(l.useIn=l.useIn.filter((e=>e!==i.name)),l.useIn.length?n=!1:r.push([e,o,t,s])):r.push([e,o,t,s]))}))}))}))})),n&&(e.shareScopeMap={},delete o[h]),r.forEach((([e,t,n,r])=>{var s,i,a;null==(a=o[e])||(null==(i=a[t])||(null==(s=i[n])||delete s[r]))})),globalThis.__FEDERATION__.__INSTANCES__.splice(u,1)}const{hostGlobalSnapshot:d}=I(e,r);if(d){const o=d&&"remotesInfo"in d&&d.remotesInfo&&t.getInfoWithoutType(d.remotesInfo,e.name).key;o&&(delete d.remotesInfo[o],Boolean(t.Global.__FEDERATION__.__MANIFEST_LOADING__[o])&&delete t.Global.__FEDERATION__.__MANIFEST_LOADING__[o])}r.moduleCache.delete(e.name)}}catch(e){console.log("removeRemote fail: ",e)}}constructor(e){this.hooks=new m({beforeRegisterRemote:new p("beforeRegisterRemote"),registerRemote:new p("registerRemote"),beforeRequest:new f("beforeRequest"),onLoad:new u("onLoad"),handlePreloadModule:new h("handlePreloadModule"),errorLoadRemote:new u("errorLoadRemote"),beforePreloadRemote:new u("beforePreloadRemote"),generatePreloadAssets:new u("generatePreloadAssets"),afterPreloadRemote:new u,loadEntry:new u}),this.host=e,this.idToRemoteMap={}}}function P(){return P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},P.apply(this,arguments)}class x{initOptions(e){this.registerPlugins(e.plugins);const t=this.formatOptions(this.options,e);return this.options=t,t}async loadShare(e,t){return this.sharedHandler.loadShare(e,t)}loadShareSync(e,t){return this.sharedHandler.loadShareSync(e,t)}initializeSharing(e=t.DEFAULT_SCOPE,o){return this.sharedHandler.initializeSharing(e,o)}initRawContainer(e,t,o){const n=a({name:e,entry:t}),r=new c({host:this,remoteInfo:n});return r.remoteEntryExports=o,this.moduleCache.set(e,r),r}async loadRemote(e,t){return this.remoteHandler.loadRemote(e,t)}async preloadRemote(e){return this.remoteHandler.preloadRemote(e)}initShareScopeMap(e,t,o={}){this.sharedHandler.initShareScopeMap(e,t,o)}formatOptions(e,o){const{shared:n}=t.formatShareConfigs(e,o),{userOptions:r,options:s}=this.hooks.lifecycle.beforeInit.emit({origin:this,userOptions:o,options:e,shareInfo:n}),i=this.remoteHandler.formatAndRegisterRemote(s,r),{shared:a}=this.sharedHandler.registerShared(s,r),l=[...s.plugins];r.plugins&&r.plugins.forEach((e=>{l.includes(e)||l.push(e)}));const c=P({},e,o,{plugins:l,remotes:i,shared:a});return this.hooks.lifecycle.init.emit({origin:this,options:c}),c}registerPlugins(e){const o=function(e,o){const n=t.getGlobalHostPlugins();return n.length>0&&n.forEach((t=>{(null==e?void 0:e.find((e=>e.name!==t.name)))&&e.push(t)})),e&&e.length>0&&e.forEach((e=>{o.forEach((t=>{t.applyPlugin(e)}))})),e}(e,[this.hooks,this.remoteHandler.hooks,this.sharedHandler.hooks,this.snapshotHandler.hooks,this.loaderHook]);this.options.plugins=this.options.plugins.reduce(((e,t)=>t?(e&&!e.find((e=>e.name===t.name))&&e.push(t),e):e),o||[])}registerRemotes(e,t){return this.remoteHandler.registerRemotes(e,t)}constructor(e){this.hooks=new m({beforeInit:new p("beforeInit"),init:new h,beforeInitContainer:new f("beforeInitContainer"),initContainer:new f("initContainer")}),this.version="0.5.0",this.moduleCache=new Map,this.loaderHook=new m({getModuleInfo:new h,createScript:new h,createLink:new h,fetch:new u});const o={id:t.getBuilderId(),name:e.name,plugins:[{name:"snapshot-plugin",async afterResolve(e){const{remote:o,pkgNameOrAlias:n,expose:r,origin:s,remoteInfo:i}=e;if(!t.isRemoteInfoWithEntry(o)||!t.isPureRemoteEntry(o)){const{remoteSnapshot:t,globalSnapshot:a}=await s.snapshotHandler.loadRemoteSnapshotInfo(o);E(i,t);const l={remote:o,preloadConfig:{nameOrAlias:n,exposes:[r],resourceCategory:"sync",share:!1,depsRemote:!1}},c=await s.remoteHandler.hooks.lifecycle.generatePreloadAssets.emit({origin:s,preloadOptions:l,remoteInfo:i,remote:o,remoteSnapshot:t,globalSnapshot:a});return c&&y(i,s,c,!1),b({},e,{remoteSnapshot:t})}return e}},{name:"generate-preload-assets-plugin",async generatePreloadAssets(e){const{origin:o,preloadOptions:n,remoteInfo:r,remote:s,globalSnapshot:i,remoteSnapshot:a}=e;return t.isRemoteInfoWithEntry(s)&&t.isPureRemoteEntry(s)?{cssAssets:[],jsAssetsWithoutEntry:[],entryAssets:[{name:s.name,url:s.entry,moduleInfo:{name:r.name,entry:s.entry,type:"global",entryGlobalName:"",shareScope:""}}]}:(E(r,a),v(o,n,r,i,a))}}],remotes:[],shared:{},inBrowser:t.isBrowserEnv()};this.name=e.name,this.options=o,this.snapshotHandler=new O(this),this.sharedHandler=new T(this),this.remoteHandler=new N(this),this.shareScopeMap=this.sharedHandler.shareScopeMap,this.registerPlugins([...o.plugins,...e.plugins||[]]),this.options=this.formatOptions(o,e)}}let j=null;t.setGlobalFederationConstructor(x),e.registerGlobalPlugins=t.registerGlobalPlugins,Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(e,"loadScriptNode",{enumerable:!0,get:function(){return o.loadScriptNode}}),e.FederationHost=x,e.getInstance=function(){return j},e.getRemoteEntry=i,e.getRemoteInfo=a,e.init=function(e){const o=t.getGlobalFederationInstance(e.name,e.version);if(o)return o.initOptions(e),j||(j=o),o;{const o=t.getGlobalFederationConstructor()||x;return j=new o(e),t.setGlobalFederationInstance(j),j}},e.loadRemote=function(...e){return t.assert(j,"Please call init first"),j.loadRemote.apply(j,e)},e.loadShare=function(...e){return t.assert(j,"Please call init first"),j.loadShare.apply(j,e)},e.loadShareSync=function(...e){return t.assert(j,"Please call init first"),j.loadShareSync.apply(j,e)},e.preloadRemote=function(...e){return t.assert(j,"Please call init first"),j.preloadRemote.apply(j,e)},e.registerPlugins=function(...e){return t.assert(j,"Please call init first"),j.registerPlugins.apply(j,e)},e.registerRemotes=function(...e){return t.assert(j,"Please call init first"),j.registerRemotes.apply(j,e)}}(index_cjs$1);const defaultRetries=3;async function fetchWithRetry({url:e,options:t={},retryTimes:o=defaultRetries,fallbackUrl:n=""}){try{const o=await fetch(e,t),n=o.clone();if(!o.ok)throw new Error(`Server error：${o.status}`);return await n.json().catch((t=>{throw new Error(`Json parse error: ${t}, url is: ${e}`)})),o}catch(r){if(o<=0){if(console.log(`>>>>>>>>> retry failed after ${defaultRetries} times for url: ${e}, now will try fallbackUrl url: ${n} <<<<<<<<<`),n&&n!==e)return fetchWithRetry({url:n,options:t,retryTimes:1,fallbackUrl:n});throw new Error("The request failed three times and has now been abandoned")}return await new Promise((e=>setTimeout(e,1e3))),console.log("Trying again. Number of retries available："+(o-1)),await fetchWithRetry({url:e,options:t,retryTimes:o-1,fallbackUrl:n})}}const RetryPlugin=e=>({name:"retry-plugin",fetch:async(t,o)=>fetchWithRetry({url:t,options:_extends({},o,null==e?void 0:e.options),retryTimes:null==e?void 0:e.retryTimes,fallbackUrl:null==e?void 0:e.fallbackUrl})});var retryPlugin_cjs=RetryPlugin,exports,__createBinding,__exportStar;!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=index_cjs$1;function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=o(retryPlugin_cjs);Object.defineProperty(e,"RetryPlugin",{enumerable:!0,get:function(){return n.default}}),Object.keys(t).forEach((function(o){"default"===o||e.hasOwnProperty(o)||Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[o]}})}))}(runtime_cjs),exports=runtime,__createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),__exportStar=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||__createBinding(t,e,o)},Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(runtime_cjs,exports);const remotes=[{name:"plugin",entry:"http://localhost:4001/mf-manifest.json",module:"accuris-plugin"}],shared={lit:{scope:"default",shareConfig:{singleton:!0,requiredVersion:"^3.2.0"}}};class RuntimePlugins{constructor(){Object.defineProperty(this,"pluginConfig",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.initFederationRuntime()}initFederationRuntime(){runtime.init({name:"kernel",remotes,shared})}async getPluginConfig(){await setTimeout((()=>(this.pluginConfig=remotes,this.pluginConfig)),200)}async getPlugins(){return remotes.forEach((async e=>{const t=`${e.name}/${e.module}`;try{const o=await runtime.loadRemote(t);o?(console.log("[federation][remote loaded]",o),this.plugins.set(e.name,o),Object.hasOwnProperty.call(o,"register")&&(console.log("[federation][remote register]"),o.register(this))):console.log("[federation][remote load failed]")}catch(e){console.log("ERROR",e)}}))}getModule(e){return this.plugins.get(e)}getModules(){return Array.from(this.plugins)}}const Kernel=new RuntimePlugins;!async function(){await Kernel.getPluginConfig(),await Kernel.getPlugins(),console.log("Kernel",Kernel)}(),customElements.define("viewer-element",ViewerElement);
